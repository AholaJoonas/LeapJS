<html><body>
<script src="Leap.js"></script>
<script src="testdata.js"></script>
<div id="output"></div>
<script type="text/javascript">

myListener = new Leap.Listener();
myListener.onFrame = function(controller){
	//document.getElementById("output").innerHTML += '<pre>' + controller.frame().toString() + '</pre>';
}

var start = new Date().getTime();

myController = new Leap.Controller("ws://localhost:6437/");
myController.addListener(myListener);

var end = new Date().getTime();
document.getElementById("output").innerHTML += "Setup time: ~" + (end-start) + "ms<br/>";

document.getElementById("output").innerHTML += "Loading test data...<br/>";

start = new Date().getTime();
for(index in test){
	
	myController.Socket.onmessage(test[index]);
	//document.getElementById("output").innerHTML += "Frame load: ~" + (end-start) + "ms<br/>";
}
end = new Date().getTime();

document.getElementById("output").innerHTML += "Frame rate: ~" + Math.round(1000*test.length/(end-start)) + " fps<br/>";
document.getElementById("output").innerHTML += "Avg frame time: ~" + Math.round(1000*(end-start)/test.length)/1000 + "ms<br/>";

</script>
</body></html>