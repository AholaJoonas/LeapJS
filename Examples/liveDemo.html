<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
	<body>
		<script src="../Leap.js"></script>
		<script src="js/utilities.js"></script>
		
		<b>LeapJS Live Demo:</b><br/>
		<canvas id="canvas1" width="300" height="300" style="border-right: 4px solid blue"></canvas>
		<canvas id="canvas2" width="400" height="300" style="border-top: 4px solid blue"></canvas><br/>
		<div id="output"></div>
		
		<script type="text/javascript">
			
			// Store context for canvas elements
			var context1 = document.getElementById("canvas1").getContext('2d');
			var context2 = document.getElementById("canvas2").getContext('2d');
			
			// Create a listener that will print frame data when a new frame arrives
			myListener = new Leap.Listener();
			myListener.onFrame = function(controller){
				fade();
				var o = '';
				var frame = controller.frame();
				o += 'id: ' + frame.id + '<br/>';
				o += 'timestamp: ' + frame.timestamp + ' ' + realTime(frame.timestamp) + '<br/>';
				for(id in frame.hands){
					var hand = frame.hands[id];
					drawHand(hand);
					for(hid in hand.fingers){
						var finger = hand.fingers[hid];
						drawFinger(finger);
					}
					for(tid in hand.tools){
						var tool = hand.tools[tid];
						drawTool(tool);
					}
				}
				document.getElementById("output").innerHTML = o;
			}
			myListener.onDisconnect - function(controller){
				document.getElementById("output").innerHTML = 'Device disconnected.';
			}
			
			// Create a controller to connect to the Leap Motion
			myController = new Leap.Controller("ws://localhost:6437/");
			
			// Add the listener to the controller
			myController.addListener(myListener);
		</script>
	</body>
</html>